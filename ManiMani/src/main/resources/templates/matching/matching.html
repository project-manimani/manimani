<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Insert title here</title>
<style type="text/css">
/***** slide  *****/
.wrap-uList {
    margin: 0px auto;
    width: 80%;
    height: 40%;
    position: absolute;
    border-radius: 20px;
    border: 1.5px solid #494949;
    min-height: 900px;
    background-color: #93b8ef;
}
.mgUserList {
    position: absolute;
    top: 80px;
    right: 2%;
    width: 96%;
    height: 300px;
    overflow: hidden;
    left: 2%;
    background-color: #fff7ee;
    border-radius: 20px;
    border: 1.5px solid #494949;
}
.makeoverflow {
    position: absolute;
    top: 0px;
    margin: 0px;
    width: 1200px;
    height: 50%;
}
.circleWrap {
    position: relative;
    display: inline-block;
    width: 250px;
    height: 250px;
    margin: 20px;
    border-radius: 200px;
    text-align: center;
    background-color: #fd9;
    padding: 35px;
    border: 1.5px solid #494949;
}
.righterPosition{
	position:absolute;
	right:30px;
	top:130px;
	z-index:3;
	width:30px;
	height:30px;
}
.poster{
	width:100%;
	height:100%;
	border-radius: 20px;
}
.userInfo {
    left: 20%;
    position: absolute;
    bottom: 20px;
    margin: 0px auto;
    width: 60%;
    height: 15%;
    right: 20%;
    background-color: rgba(255,255,255,0.8);
    border-radius: 20px;
    bottom: 10%;
    padding: 6%;
    border: 1.5px solid #494949;
}
p{
	line-height:5px; 
}
.font-h{
	position:absolute;
	font-size: 25px;
	font-weight: 600;
	font-style: oblique;
	color:#fff7ee;
	top:20px;;
	left:5%;
}
.height-45{
    position: absolute;
    font-size: 23px;
    font-weight:600;
    color: #fff7ee;
    top: 45%;
    right: 5%;
}
/*****  end slide  *****/
/***** 내 프로필   *****/
.wrap-myImg{
    width: 250px;
    height: 300px;
    margin-left: 5%;
    margin-top: 40px;
    border-radius: 20px;
    border: 1.5px solid #494949;
    background-color: #fff7ee;
}
.myImg{
	width: 218px;
    margin-left: 5%;
    margin-top: 28px;
}
.myInfo{
	position: absolute;
    border-radius: 20px;
    border: 1.5px solid #494949;
    min-height: 380px;
    width: 42.25%;
    margin-top: 468px;
    left:5%;
    background-color: #dcedbc;
}
.maniInfo{
    position: absolute;
    border-radius: 20px;
    border: 1.5px solid #494949;
    min-height: 380px;
    width: 42.25%;
    margin-top: 468px;
    margin-left: 20px;
    right:5%;
    background-color: #dcedbc;
}
/*****  end 내프로필   *****/

</style>
<link rel="stylesheet" type="text/css" th:href="@{/css/matching.css}">
<script src="https://code.jquery.com/jquery.js"></script>
<script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js"></script>
<script>
$(function(){
	$('.circleWrap').hover(function(){
       $(this).css("cursor","pointer")
    },function(){
       $(this).css("cursor","")
    })
    /*maniImg default*/
    $('#maniImg').attr("src","/img/matching/물음표.png");
	
    // start click => userDetail
    $('.poster').click(function(){
		let uid=$(this).attr("data-uid");
		let uimg=$(this).attr("data-img");
       	console.log('clickUserID:'+uid+' ## userImg:'+uimg);//
       	$.ajax({
        	type:'post',
        	url:'userDetail',
        	data:{"userID":uid},
          	success:function(res){
            	console.log("success: "+res.account+' ## uimg:'+uimg);//
            	$('#maniImg').attr("src",uimg);
            	console.log("maniImg:"+$('#maniImg').attr("src"));
            	$('#matchingBtn').attr("data-mUid",res.uid);
            	$('#maniAccount').text(res.account);
            	$('#maniEmail').text(res.email);
            	$('.mbtn').show();
          	}
   		})//end ajax
	})//end click.poster
	$('#matchingBtn').click(function(){
		let maniUid=$(this).attr("data-mUid");
		console.log("maniUid: "+maniUid);
		$.ajax({
			type:'post',
			url:'matchingCheck',
			data:{"maniUid":maniUid},
			success:function(res){
				console.log("success: "+res);
				if(res=='T'){
					$('#check').text("마니도 추측 성공!! 당신의 마니또에게 고마움을 전해보세요:)");
					$('#sendEmail').show();
					/*'개인편지함>편지쓰기'로 이동 */
				}else{
					$('#check').text("maniAccount님은 당신의 마니또가 아닙니다. 다음 기회에 다시 도전해보세요 :)")
					$('#sendEmail').hide();
					/*기능추가시) 남은 도전기회:count 또는 다음도전일자 */
					/*cookie등록 => 선택자제외 */
				}
				$('#dialog').dialog({
    				autoOpen:false,
    				width:500,
    				height:400,
    				modal:true
    			}).dialog("open");
			}
		})//ajax
	})//end click#matchingBtn
})//end function
</script>
<script>
$(document).ready(function() {
	/***** slide *****/
	$('.makeOverflow').slick({
		prevArrow : $(".lefter"),
		nextArrow : $(".righter"),
		infinite : true,
		speed : 300,
		slidesToShow : 4,
		slidesToScroll : 1
	});
	/*****  end slide  *****/
});
</script>
</head>
<body>
<!-- *******************************        Side         ****************************** -->
	<!--****************************   MatchingContent   *****************************  -->
	<div class="matching_cnt">
		<div class="container flex-c">
			<div class="wrap-uList flex-c">
				<div class="font-h">GroupName그룹 회원목록</div>				
				<!--********************  slick(slide)  ********************-->
				<div class="mgUserList">
					<div class="righterPosition">
						<!-- <img class="righter" th:src="@{/image/righter.png}"> -->
						<i class="righter fas fa-angle-double-right"></i>
					</div>
					<div class="makeoverflow">
						<div class="circleWrap" th:each="vo,index:${list}">
							<img class="poster" th:title="${vo.account}"
								th:src="${index.index}+1>9?@{/img/matching/user_}+(${index.index}-8)+'.png':@{/img/matching/user_} + (${index.index}+1) + '.png'"
         						th:data-uid="${vo.uid}" th:data-img="${index.index}+1>9?@{/img/matching/user_}+(${index.index}-8)+'.png':@{/img/matching/user_} + (${index.index}+1) + '.png'"
         					>
						<div class="userInfo">
							 <p th:text="${vo.account}"></p>
							<!--<p th:text="${vo.account.length>=10?#strings.substring(vo.account,0,10)+'...':vo.account}"></p> -->
						</div>
					</div>	
				</div>
			</div>
			<!-- **********************  end slide  ********************** -->
			<div class="height-45"><span class="fs-25" th:text="${sessionID}"></span>님의 마니또 라고 생각하는 상대를 클릭해보세요 : )  
				<button class="mbtn" id="matchingBtn" data-mUid="maniUid">확인</button>
			</div>
			<div class="myInfo">
				<div class="wrap-myImg ">
					<img class="myImg" th:src="@{/img/matching/user_6.png}">
				</div>
				<div class="account" th:text="${sessionID}"></div>
			</div>
			<div class="maniInfo">
				<div class="wrap-myImg ">
					<img class="myImg" id="maniImg" >
				</div>
				<div class="account">
					<p id="maniAccount"></p><br>
					<p id="maniEmail"></p>
				</div>
			</div>			
		</div>
	</div>
	<!--*******************   dialog   *******************-->
	<div class="box" id="dialog" style="display:none"><!-- title대입 예정 -->
	 <div id="check"></div>
	 <a id="sendEmail" href="../letter/letter" style="display: none">개인편지함으로 이동</a>
   	</div>
   	<!--*****************   end dialog   *****************-->    
    </div>
    <!--****************************   end MatchingContent   ****************************** -->
<!-- *******************************       Footer            ****************************** -->
<script type="text/javascript"src="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script> 
<script>
	$(document).ready(function() {
		$('.makeoverflow').slick({
			prevArrow : $(".lefter"),
			nextArrow : $(".righter"),
			infinite : true,
			speed : 300,
			slidesToShow : 4,
			slidesToScroll : 1
		});
	});
</script>
</body>
</html>
